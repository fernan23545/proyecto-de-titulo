{% extends "base.html" %}
{% block content %}

<div class="max-w-5xl mx-auto space-y-6">

  {% if rol == "cliente" %}
    <h1 class="text-2xl font-bold">Mis reservas</h1>
    <p class="text-sm text-gray-600 mb-4">Estas son las reservas que tú has realizado.</p>

    {% if reservas_cliente %}
      <div class="space-y-3">
        {% for r in reservas_cliente %}
        <div class="bg-white p-4 rounded-2xl border shadow-sm">
          <p class="font-semibold">{{ r.servicio }} — {{ r.emprendimiento.nombre }}</p>
          <p class="text-sm text-gray-600">{{ r.fecha }} a las {{ r.hora }}</p>
          {% if r.comentario %}
          <p class="text-xs mt-1">Comentario: {{ r.comentario }}</p>
          {% endif %}
          <span class="inline-block mt-2 px-2 py-1 text-xs rounded-full bg-gray-100">
            {{ r.get_estado_display }}
          </span>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-600">No tienes reservas realizadas.</p>
    {% endif %}
  

  {% elif rol == "emprendedor" %}
    <h1 class="text-2xl font-bold">Reservas de mis emprendimientos</h1>
    <p class="text-sm text-gray-600 mb-4">Aquí ves todas las reservas hechas a tus negocios.</p>

    {% if reservas_emprendedor %}
      <div class="space-y-3">
        {% for r in reservas_emprendedor %}
        <div class="bg-white p-4 rounded-2xl border shadow-sm flex justify-between items-center">
          <div>
            <p class="font-semibold">{{ r.nombre_cliente }} — {{ r.servicio }}</p>
            <p class="text-sm text-gray-600">
              {{ r.fecha }} a las {{ r.hora }} • {{ r.emprendimiento.nombre }}
            </p>
            {% if r.comentario %}
              <p class="text-xs mt-1">Comentario: {{ r.comentario }}</p>
            {% endif %}
          </div>

          <div class="flex gap-2 text-xs">
            <a href="{% url 'cambiar_estado_reserva' r.id 'pendiente' %}" class="px-2 py-1 bg-yellow-500 text-white rounded">
              Pendiente
            </a>
            <a href="{% url 'cambiar_estado_reserva' r.id 'en_proceso' %}" class="px-2 py-1 bg-blue-600 text-white rounded">
              En proceso
            </a>
            <a href="{% url 'cambiar_estado_reserva' r.id 'completado' %}" class="px-2 py-1 bg-green-600 text-white rounded">
              Completado
            </a>
            <a href="{% url 'cambiar_estado_reserva' r.id 'cancelado' %}" class="px-2 py-1 bg-red-600 text-white rounded">
              Cancelado
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-600">Aún no tienes reservas en tus emprendimientos.</p>
    {% endif %}
  {% endif %}

</div>

{% endblock %}
